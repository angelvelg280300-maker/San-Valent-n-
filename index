<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Para ti ❤️</title>
  <style>
    :root{
      --bg:#f6f0e7;
      --card:#fff8ef;
      --text:#2a2a2a;
      --muted:#5a5a5a;
      --accent:#e53968;
      --line:#1f1f1f;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(229,57,104,.18), transparent 60%),
        radial-gradient(700px 500px at 80% 20%, rgba(229,57,104,.10), transparent 55%),
        linear-gradient(180deg, #2b0036, #130018);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding:18px;
    }
    .frame{
      width:min(980px, 96vw);
      border-radius:26px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      padding:16px;
      backdrop-filter: blur(10px);
    }
    .card{
      background: var(--card);
      border-radius:22px;
      overflow:hidden;
      box-shadow: 0 24px 80px rgba(0,0,0,.35);
    }
    .content{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap:0;
      min-height:520px;
    }
    .left{
      padding:32px 26px 18px;
      color:var(--text);
    }
    .left h1{
      font-size:18px;
      font-weight:700;
      margin:0 0 18px;
    }
    .left .poem{
      font-size:22px;
      line-height:1.35;
      margin:0 0 16px;
      white-space:pre-line;
    }
    .left .sig{
      margin-top:10px;
      font-size:20px;
      font-weight:650;
    }
    .divider{
      height:1px;
      background: rgba(0,0,0,.2);
      margin:16px 0 14px;
    }
    .timerLabel{
      font-size:18px;
      color:var(--muted);
      margin:0 0 6px;
    }
    .timer{
      font-size:34px;
      font-weight:800;
      letter-spacing:.3px;
      color:var(--text);
    }
    .timer small{
      font-size:16px;
      font-weight:650;
      color:var(--muted);
    }

    .right{
      position:relative;
      background: var(--bg);
      display:grid;
      place-items:center;
      padding:12px 12px 16px;
    }
    canvas{
      width: 100%;
      max-width: 420px;
      height: 100%;
      max-height: 520px;
      aspect-ratio: 4 / 5;
      border-radius:18px;
      background: linear-gradient(180deg, #f7f0e7, #f2e7db);
      border:1px solid rgba(0,0,0,.12);
    }

    .bottomBar{
      height:6px;
      background: rgba(0,0,0,.08);
    }

    @media (max-width: 860px){
      .content{ grid-template-columns: 1fr; }
      .right{ padding-top:0; }
      .left .poem{ font-size:20px; }
      .timer{ font-size:30px; }
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="card">
      <div class="content">
        <div class="left">
          <h1 id="title">Para el amor de mi vida:</h1>

          <div class="poem" id="poem">
Si pudiera elegir un lugar
seguro, sería a tu lado.

Cuanto más tiempo estoy
contigo más te amo.
          </div>

          <div class="sig" id="sig">— I Love You! ❤️</div>

          <div class="divider"></div>

          <div class="timerLabel" id="timerLabel">Mi amor por ti comenzó hace…</div>
          <div class="timer" id="timer">
            <span id="days">0</span> <small>días</small>
            <span id="hours">0</span> <small>horas</small>
            <span id="mins">0</span> <small>min</small>
            <span id="secs">0</span> <small>seg</small>
          </div>
        </div>

        <div class="right">
          <canvas id="c"></canvas>
        </div>
      </div>
      <div class="bottomBar"></div>
    </div>
  </div>

<script>
/* =======================
   PERSONALIZA AQUÍ
   ======================= */
const CONFIG = {
  tuNombre: "Tu nombre",
  suNombre: "Su nombre",
  // Fecha desde la que empieza el contador (pon tu fecha real)
  // Formato recomendado: "YYYY-MM-DDTHH:mm:ss"
  inicioAmor: "2025-02-14T00:00:00",
  textoTitulo: "Para el amor de mi vida:",
  poema: `Si pudiera elegir un lugar
seguro, sería a tu lado.

Cuanto más tiempo estoy
contigo más te amo.`,
  firma: "— I Love You! ❤️",

  // Estética del árbol
  growMs: 3600,        // tiempo de crecimiento de ramas
  leafDelayMs: 500,    // espera antes de hojas
  leafAppearMs: 900,   // duración aparición hoja
  maxDepth: 7,         // profundidad de ramas
  baseLength: 95,      // longitud inicial
  heartCountHint: 120, // aprox corazones
};

/* =======================
   TEXTO A LA IZQUIERDA
   ======================= */
document.getElementById("title").textContent = CONFIG.textoTitulo;
document.getElementById("poem").textContent = CONFIG.poema;
document.getElementById("sig").textContent = CONFIG.firma;

/* =======================
   CONTADOR
   ======================= */
const startDate = new Date(CONFIG.inicioAmor);
const elDays = document.getElementById("days");
const elHours = document.getElementById("hours");
const elMins = document.getElementById("mins");
const elSecs = document.getElementById("secs");

function tickTimer(){
  const now = new Date();
  let diff = Math.max(0, now - startDate);

  const sec = Math.floor(diff / 1000);
  const days = Math.floor(sec / 86400);
  const hours = Math.floor((sec % 86400) / 3600);
  const mins = Math.floor((sec % 3600) / 60);
  const secs = sec % 60;

  elDays.textContent = days.toString();
  elHours.textContent = String(hours).padStart(2,"0");
  elMins.textContent = String(mins).padStart(2,"0");
  elSecs.textContent = String(secs).padStart(2,"0");
}
tickTimer();
setInterval(tickTimer, 1000);

/* =======================
   CANVAS: ÁRBOL CRECIENDO
   ======================= */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize(){
  const dpr = Math.min(2, window.devicePixelRatio || 1);
  const cssW = canvas.getBoundingClientRect().width;
  const cssH = canvas.getBoundingClientRect().height;
  canvas.width = Math.floor(cssW * dpr);
  canvas.height = Math.floor(cssH * dpr);
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener("resize", resize);
resize();

/* ====== RNG determinístico (para que siempre salga “igual”) ====== */
function xfnv1a(str){
  let h = 2166136261 >>> 0;
  for (let i=0;i<str.length;i++){
    h ^= str.charCodeAt(i);
    h = Math.imul(h, 16777619);
  }
  return h >>> 0;
}
function mulberry32(a){
  return function(){
    let t = a += 0x6D2B79F5;
    t = Math.imul(t ^ (t >>> 15), t | 1);
    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
  };
}
const seed = xfnv1a(`${CONFIG.tuNombre}|${CONFIG.suNombre}|${CONFIG.inicioAmor}`);
const rand = mulberry32(seed);

function clamp(x,a,b){ return Math.max(a, Math.min(b,x)); }
function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }
function easeOutBack(t){
  const c1 = 1.70158, c3 = c1 + 1;
  return 1 + c3*Math.pow(t-1,3) + c1*Math.pow(t-1,2);
}

/* ====== Generación del árbol (ramas) ====== */
const segments = [];
const leaves = [];

function addBranch(x1,y1, angle, length, thickness, depth){
  const x2 = x1 + Math.cos(angle) * length;
  const y2 = y1 + Math.sin(angle) * length;

  segments.push({x1,y1,x2,y2, thickness, depth, rs:0, re:0});

  // detener
  if (depth >= CONFIG.maxDepth || length < 14){
    leaves.push({x:x2, y:y2, t:0});
    return;
  }

  // variación: 2 o 3 ramas
  const branches = (rand() < 0.25) ? 3 : 2;

  for (let i=0;i<branches;i++){
    const spread = (branches === 3) ? (i-1) : (i===0 ? -1 : 1);
    const jitter = (rand()*0.35 - 0.175);
    const a2 = angle + spread*(0.45 + rand()*0.22) + jitter;
    const l2 = length * (0.72 + rand()*0.12);
    const th2 = thickness * (0.72 + rand()*0.10);
    addBranch(x2, y2, a2, l2, th2, depth+1);
  }
}

function buildTree(){
  segments.length = 0;
  leaves.length = 0;

  const W = canvas.getBoundingClientRect().width;
  const H = canvas.getBoundingClientRect().height;

  // punto base (tronco) un poco a la derecha como en tu imagen
  const rootX = W * 0.62;
  const rootY = H * 0.96;

  // tronco base
  addBranch(rootX, rootY, -Math.PI/2, CONFIG.baseLength, 12, 0);

  // Orden de dibujo (reveal) para que “crezca”
  const total = segments.length;
  for (let i=0;i<total;i++){
    const start = (i / total) * CONFIG.growMs;
    segments[i].rs = start;
    segments[i].re = start + (520 + rand()*260);
  }

  // Orden de aparición de hojas
  const leafStart = CONFIG.growMs + CONFIG.leafDelayMs;
  for (let i=0;i<leaves.length;i++){
    leaves[i].appear = leafStart + i * (10 + rand()*14);
  }

  return {W,H};
}

buildTree();

/* ====== Corazón dibujado en canvas ====== */
function drawHeart(x,y, s, alpha, hueShift=0){
  ctx.save();
  ctx.globalAlpha = alpha;
  ctx.translate(x,y);
  ctx.scale(s,s);

  // gradiente “rosas/rojos”
  const g = ctx.createLinearGradient(-1.2,-1.2, 1.2, 1.2);
  g.addColorStop(0, `hsl(${345+hueShift}, 90%, 60%)`);
  g.addColorStop(1, `hsl(${350+hueShift}, 95%, 70%)`);
  ctx.fillStyle = g;

  ctx.beginPath();
  // shape corazón (paramétrica simple)
  ctx.moveTo(0, -0.35);
  ctx.bezierCurveTo(0.7, -1.15, 1.6, -0.25, 0, 1.0);
  ctx.bezierCurveTo(-1.6, -0.25, -0.7, -1.15, 0, -0.35);
  ctx.closePath();
  ctx.fill();

  ctx.restore();
}

/* ====== Fondo y texto suave ====== */
function drawOverlayText(W,H){
  ctx.save();
  ctx.globalAlpha = 0.0; // (apagado por defecto)
  ctx.restore();
}

/* ====== Loop de animación ====== */
const t0 = performance.now();
function frame(now){
  const t = now - t0;

  const W = canvas.getBoundingClientRect().width;
  const H = canvas.getBoundingClientRect().height;

  // limpiar
  ctx.clearRect(0,0,W,H);

  // sombra base suave
  ctx.save();
  ctx.globalAlpha = 0.06;
  ctx.fillStyle = "#000";
  ctx.beginPath();
  ctx.ellipse(W*0.62, H*0.965, W*0.22, H*0.03, 0, 0, Math.PI*2);
  ctx.fill();
  ctx.restore();

  // ramas “creciendo”
  for (const seg of segments){
    const local = clamp((t - seg.rs) / (seg.re - seg.rs), 0, 1);
    if (local <= 0) continue;

    const p = easeOutCubic(local);
    const x = seg.x1 + (seg.x2 - seg.x1) * p;
    const y = seg.y1 + (seg.y2 - seg.y1) * p;

    ctx.lineCap = "round";
    ctx.strokeStyle = "rgba(94,59,40,0.95)"; // café tronco
    ctx.lineWidth = Math.max(1.2, seg.thickness);
    ctx.beginPath();
    ctx.moveTo(seg.x1, seg.y1);
    ctx.lineTo(x, y);
    ctx.stroke();
  }

  // hojas (corazones) apareciendo
  for (let i=0;i<leaves.length;i++){
    const leaf = leaves[i];
    const lt = clamp((t - leaf.appear) / CONFIG.leafAppearMs, 0, 1);
    if (lt <= 0) continue;

    const scale = 6.5 + (easeOutBack(lt) * 7.5); // tamaño final
    const a = clamp(lt*1.2, 0, 1);

    // pequeña variación de color
    const hueShift = Math.floor((rand()*18)-9);

    drawHeart(leaf.x, leaf.y, scale/20, a, hueShift);

    // algunos corazones extra alrededor (para “follaje” denso)
    if (i % 2 === 0 && lt > 0.6){
      const puff = 1 + Math.floor(rand()*2);
      for (let k=0;k<puff;k++){
        const ox = (rand()*22 - 11);
        const oy = (rand()*18 - 9);
        const s2 = (scale * (0.65 + rand()*0.35));
        drawHeart(leaf.x + ox, leaf.y + oy, s2/22, a*0.65, hueShift);
      }
    }
  }

  drawOverlayText(W,H);

  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);
</script>
</body>
</html>
